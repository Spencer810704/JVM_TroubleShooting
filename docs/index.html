<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>https://baoyingwang.github.io/JVM_TroubleShooting/</title>
    <script src="./scripts/mbraak-jqTree-1.4.12-0-f2091a1/jquery.min.js"></script>
    <script src="./scripts/mbraak-jqTree-1.4.12-0-f2091a1/tree.jquery.js"></script>
    <link rel="stylesheet" href="./scripts/mbraak-jqTree-1.4.12-0-f2091a1/jqtree.css">

    <style>
//https://stackoverflow.com/questions/1260122/expand-a-div-to-fill-the-remaining-width
.container {
    width:1200px;
    height:1200px;
    border:1px solid;
}
.jq_tree {
    height:1200px;
    width:400px;
    background:yellow;
    float:left;
}
.kb_content {
    width:auto;
    height:1200px;
    background:grey;
    overflow:hidden;

}

</style>

    <script>

    var data = [
{"name": "md", "id": 0, "url": "md", "children": [
{"name": "md_1.md", "id": 1, "is_dir": false, "url": "md/md_1.html"},
{"name": "js", "id": 2, "is_dir": true, "url": "md/js", "children":
[{"name": "jqTree-Tips.md", "id": 3, "is_dir": false, "url": "md/js/jqTree-Tips.html"},
{"name": "jqTree-QuickStart.md", "id": 4, "is_dir": false, "url": "md/js/jqTree-QuickStart.html"}]}, {"name": "f2", "id": 5, "is_dir": true, "url": "md/f2", "children": [{"name": "index.md", "id": 6, "is_dir": false, "url": "md/f2/index.html"}]}, {"name": "test_lab", "id": 7, "is_dir": true, "url": "md/test_lab", "children": [{"name": "http_circular_lab_en.md", "id": 8, "is_dir": false, "url": "md/test_lab/http_circular_lab_en.html"}, {"name": "http_circular_lab.md", "id": 9, "is_dir": false, "url": "md/test_lab/http_circular_lab.html"}]}, {"name": "f1", "id": 10, "is_dir": true, "url": "md/f1", "children": [{"name": "index.md", "id": 11, "is_dir": false, "url": "md/f1/index.html"}]}]}

    ];

    //this base url can be replaced by empty. But for easy local test, keep it as absolute value for now
    var httpUrlBase='https://baoyingwang.github.io/JVM_TroubleShooting/';
    var treeDivId='#jq_tree'
    $(function() {
        $(treeDivId).tree({
            data: data,
            autoOpen: true,
            dragAndDrop: false,
            autoEscape: false
        });

        //https://stackoverflow.com/questions/20714589/jqtree-associating-a-url-with-a-node
        $(treeDivId).bind(
            'tree.click',
            function(event) {
                // The clicked node is 'event.node'
                var node = event.node;
                var theURL = node.url;
                if (theURL) {
                    //location.href = theURL;

                    //load div page - https://stackoverflow.com/questions/18145273/how-to-load-an-external-webpage-into-a-div-of-a-html-page
                    $("#kb_content").html('<object data="'+httpUrlBase+theURL+'"/>');
                    
                    //$('#kb_content').load(httpUrlBase+theURL +  ' #kb_content');
                }
            }
        );

        //https://github.com/mbraak/jqTree/issues/211
        //https://stackoverflow.com/questions/14411235/while-typing-in-a-text-input-field-printing-the-content-typed-in-a-div
        //https://api.jquery.com/keyup/
        //https://stackoverflow.com/questions/8795283/jquery-get-input-value-after-keypress
        $('#searchName').keyup(
            function(e) {

                //https://stackoverflow.com/questions/11365632/how-to-detect-when-the-user-presses-enter-in-an-input-field
                if (!e) e = window.event;
                var keyCode = e.keyCode || e.which;
                if (keyCode != '13'){
                  return false;
                }

                var $tree = $(treeDivId);
                var search_term = this.value;

                var tree = $tree.tree('getTree');

                tree.iterate(
                    function(node) {
                        if (node.name.indexOf(search_term) == -1) {
                            // Not found, continue searching
                            return true;
                        }
                        else {
                            // Found. Select node. Stop searching.
                            $tree.tree('selectNode', node, true);
                            return false
                        }
                    }
                );
            }
        );
    });



    </script>



    <div class="container">
<!--
        <div id="search">
            <input type="text" id="searchName" name="searchName" required minlength="4" maxlength="8" size="10">
        </div>
-->

        <div id="jq_tree"     class="jq_tree"></div>
        <div id="kb_content"   class="kb_content"></div>

    </div>


</html>
